<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FANATICAL 2026 ‚Äî The Operating System</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ö°</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #0d1117;
            --accent: #00d4aa;
            --accent-dim: rgba(0, 212, 170, 0.2);
            --text-primary: #ffffff;
            --text-secondary: #9ca3af;
            --text-muted: #6b7280;
            --card-bg: rgba(255, 255, 255, 0.03);
            --card-border: rgba(255, 255, 255, 0.05);
            --danger: #ef4444;
            --warning: #f59e0b;
            --success: #10b981;
        }
        
        .light-mode {
            --bg-primary: #f8fafc;
            --bg-secondary: #ffffff;
            --text-primary: #0f172a;
            --text-secondary: #475569;
            --text-muted: #94a3b8;
            --card-bg: rgba(0, 0, 0, 0.02);
            --card-border: rgba(0, 0, 0, 0.08);
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        /* Typography */
        h1 { font-size: 2.5rem; font-weight: 800; line-height: 1.2; }
        h2 { font-size: 1.875rem; font-weight: 700; line-height: 1.3; }
        h3 { font-size: 1.25rem; font-weight: 600; }
        h4 { font-size: 1rem; font-weight: 600; }
        
        /* Layout */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 1.5rem; }
        .hidden { display: none !important; }
        
        /* Cards */
        .card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 1rem;
            padding: 1.5rem;
        }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
        }
        
        .btn-primary {
            background: var(--accent);
            color: #000;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 212, 170, 0.4);
        }
        
        .btn-secondary {
            background: transparent;
            border: 1px solid var(--card-border);
            color: var(--text-primary);
        }
        
        .btn-secondary:hover {
            background: var(--card-bg);
            border-color: var(--accent);
        }
        
        .btn-ghost {
            background: transparent;
            color: var(--text-secondary);
        }
        
        .btn-ghost:hover {
            color: var(--accent);
        }
        
        /* Form Elements */
        input, textarea, select {
            width: 100%;
            padding: 0.875rem 1rem;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 0.5rem;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 1rem;
            transition: border-color 0.2s;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--accent);
        }
        
        textarea { resize: vertical; min-height: 100px; }
        
        label {
            display: block;
            font-weight: 500;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
        }
        
        /* CEO Line */
        .ceo-line {
            border-left: 3px solid var(--accent);
            padding: 1rem 1.25rem;
            background: var(--accent-dim);
            border-radius: 0 0.5rem 0.5rem 0;
            font-style: italic;
            color: var(--text-secondary);
        }
        
        /* Progress */
        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--card-border);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--accent);
            border-radius: 3px;
            transition: width 0.3s;
        }
        
        /* Pills */
        .pill {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .pill-success { background: rgba(16, 185, 129, 0.2); color: var(--success); }
        .pill-danger { background: rgba(239, 68, 68, 0.2); color: var(--danger); }
        .pill-warning { background: rgba(245, 158, 11, 0.2); color: var(--warning); }
        .pill-neutral { background: var(--card-bg); color: var(--text-secondary); }
        
        /* Header */
        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(10, 10, 10, 0.8);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--card-border);
        }
        
        .light-mode .header {
            background: rgba(255, 255, 255, 0.9);
        }
        
        .header-inner {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 800;
            font-size: 1.25rem;
        }
        
        .logo-icon {
            width: 2rem;
            height: 2rem;
            background: var(--accent);
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .year-selector {
            display: flex;
            gap: 0.25rem;
            background: var(--card-bg);
            padding: 0.25rem;
            border-radius: 0.5rem;
        }
        
        .year-btn {
            padding: 0.375rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            font-weight: 600;
            background: transparent;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
        }
        
        .year-btn.active {
            background: var(--accent);
            color: #000;
        }
        
        .theme-toggle {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 0.5rem;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            color: var(--text-secondary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.125rem;
        }
        
        /* Tab Navigation */
        .tab-nav {
            display: flex;
            gap: 0.25rem;
            padding: 0 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
            overflow-x: auto;
        }
        
        .tab-btn {
            padding: 0.75rem 1.25rem;
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-weight: 500;
            font-size: 0.875rem;
            cursor: pointer;
            white-space: nowrap;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }
        
        .tab-btn:hover {
            color: var(--text-secondary);
        }
        
        .tab-btn.active {
            color: var(--accent);
            border-bottom-color: var(--accent);
        }
        
        /* Tab Content */
        .tab-content {
            padding: 2rem 0 4rem;
        }
        
        /* Onboarding */
        .onboarding {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }
        
        .onboarding-card {
            max-width: 500px;
            width: 100%;
            text-align: center;
        }
        
        .onboarding-step { display: none; }
        .onboarding-step.active { display: block; }
        
        .onboarding h1 {
            margin-bottom: 0.5rem;
        }
        
        .onboarding .subtitle {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }
        
        .lane-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
            margin: 1.5rem 0;
        }
        
        .lane-option {
            padding: 1rem;
            background: var(--card-bg);
            border: 2px solid var(--card-border);
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }
        
        .lane-option:hover {
            border-color: var(--text-muted);
        }
        
        .lane-option.selected {
            border-color: var(--accent);
            background: var(--accent-dim);
        }
        
        .lane-option input {
            display: none;
        }
        
        .lane-warning {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 1rem;
            background: rgba(245, 158, 11, 0.1);
            border-radius: 0.5rem;
            text-align: left;
            font-size: 0.875rem;
            color: var(--warning);
            margin-top: 1rem;
        }
        
        /* Command Center */
        .command-hero {
            text-align: center;
            padding: 2rem 0 1rem;
        }
        
        .command-hero h1 {
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }
        
        .command-question {
            color: var(--text-muted);
            font-size: 0.875rem;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .status-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 1rem;
            padding: 1.25rem;
            text-align: center;
        }
        
        .status-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }
        
        .status-value {
            font-size: 2rem;
            font-weight: 800;
        }
        
        .status-subtext {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }
        
        .action-card {
            background: var(--accent-dim);
            border: 1px solid var(--accent);
            border-radius: 1rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        
        .action-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }
        
        .action-text {
            font-size: 1.125rem;
            font-weight: 500;
        }
        
        .quick-ref {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 1rem;
            padding: 1.25rem;
            margin: 1.5rem 0;
        }
        
        .quick-ref-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }
        
        .quick-ref-title {
            font-size: 0.875rem;
            font-weight: 600;
        }
        
        .quick-ref-grid {
            display: grid;
            gap: 0.5rem;
            font-size: 0.875rem;
        }
        
        .quick-ref-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--card-border);
        }
        
        .quick-ref-item:last-child {
            border-bottom: none;
        }
        
        .quick-ref-label {
            color: var(--text-muted);
        }
        
        .quick-ref-value {
            font-weight: 500;
        }
        
        /* No-Think Mode */
        .no-think-mode {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(239, 68, 68, 0.1));
            border: 2px solid var(--warning);
            border-radius: 1rem;
            padding: 2rem;
            margin: 1.5rem 0;
            text-align: center;
        }
        
        .no-think-mode h3 {
            color: var(--warning);
            margin-bottom: 1rem;
        }
        
        .no-think-rules {
            text-align: left;
            background: var(--card-bg);
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .no-think-rules ol {
            margin-left: 1.25rem;
            color: var(--text-secondary);
        }
        
        .no-think-rules li {
            margin: 0.5rem 0;
        }
        
        /* Nav Cards */
        .nav-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin-top: 2rem;
        }
        
        .nav-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 1rem;
            padding: 1.25rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .nav-card:hover {
            border-color: var(--accent);
            transform: translateY(-2px);
        }
        
        .nav-card-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        .nav-card-title {
            font-weight: 600;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
        }
        
        .nav-card-status {
            font-size: 0.75rem;
            color: var(--text-muted);
        }
        
        /* Method Page */
        .method-section {
            padding: 3rem 0;
            border-bottom: 1px solid var(--card-border);
        }
        
        .method-section:last-child {
            border-bottom: none;
        }
        
        .section-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.375rem 0.75rem;
            background: var(--accent-dim);
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 1rem;
        }
        
        .layer-grid {
            display: grid;
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .layer-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 1rem;
            padding: 1.5rem;
            display: flex;
            gap: 1rem;
        }
        
        .layer-number {
            width: 2.5rem;
            height: 2.5rem;
            background: var(--accent);
            color: #000;
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            flex-shrink: 0;
        }
        
        .layer-content h4 {
            margin-bottom: 0.25rem;
        }
        
        .layer-content p {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }
        
        .triad-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .ceo-lines-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }
        
        .ceo-line-card {
            background: var(--card-bg);
            border-left: 3px solid var(--accent);
            border-radius: 0 0.75rem 0.75rem 0;
            padding: 1.25rem;
        }
        
        .ceo-line-number {
            font-size: 0.75rem;
            color: var(--accent);
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .ceo-line-text {
            font-style: italic;
            color: var(--text-secondary);
            line-height: 1.5;
        }
        
        /* Plan Builder */
        .builder-progress {
            margin-bottom: 2rem;
        }
        
        .builder-progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }
        
        .builder-step {
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        .builder-step.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .builder-step h2 {
            margin-bottom: 0.5rem;
        }
        
        .builder-step .step-description {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1.25rem;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .form-hint {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.375rem;
        }
        
        .builder-nav {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--card-border);
        }
        
        .decision-grid {
            display: grid;
            gap: 0.75rem;
            margin: 1rem 0;
        }
        
        .decision-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 0.75rem;
        }
        
        .decision-item input[type="checkbox"] {
            width: 1.25rem;
            height: 1.25rem;
            accent-color: var(--accent);
        }
        
        .decision-over {
            color: var(--text-muted);
            font-size: 0.875rem;
        }
        
        /* Success Screen */
        .success-screen {
            text-align: center;
            padding: 2rem 0;
        }
        
        .success-icon {
            width: 4rem;
            height: 4rem;
            background: var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 0 auto 1.5rem;
        }
        
        .calm-number-display {
            font-size: 4rem;
            font-weight: 800;
            color: var(--accent);
        }
        
        .calm-number-label {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }
        
        .brand-dna-output {
            text-align: left;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 1rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
            font-family: monospace;
            font-size: 0.875rem;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        
        /* Pulse Check */
        .month-tabs {
            display: flex;
            gap: 0.25rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }
        
        .month-tab {
            padding: 0.5rem 1rem;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s;
            position: relative;
        }
        
        .month-tab:hover {
            border-color: var(--text-muted);
        }
        
        .month-tab.active {
            background: var(--accent);
            border-color: var(--accent);
            color: #000;
        }
        
        .month-tab.completed::after {
            content: '‚úì';
            position: absolute;
            top: -0.375rem;
            right: -0.375rem;
            width: 1rem;
            height: 1rem;
            background: var(--success);
            border-radius: 50%;
            font-size: 0.625rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        
        .quarter-badge {
            font-size: 0.625rem;
            background: var(--accent-dim);
            color: var(--accent);
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            margin-left: 0.375rem;
        }
        
        .pulse-section {
            margin-bottom: 2rem;
        }
        
        .pulse-section-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .radio-group {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .radio-option {
            padding: 0.5rem 1rem;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .radio-option:hover {
            border-color: var(--text-muted);
        }
        
        .radio-option input {
            display: none;
        }
        
        .radio-option.selected {
            background: var(--accent-dim);
            border-color: var(--accent);
            color: var(--accent);
        }
        
        /* Standards */
        .standards-progress {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .standards-progress h2 {
            font-size: 3rem;
            font-weight: 800;
        }
        
        .standards-progress h2 span {
            color: var(--accent);
        }
        
        .standard-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 1rem;
            margin-bottom: 1rem;
            overflow: hidden;
            transition: all 0.2s;
        }
        
        .standard-card.complete {
            border-color: var(--success);
        }
        
        .standard-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.25rem;
            cursor: pointer;
        }
        
        .standard-header:hover {
            background: rgba(255, 255, 255, 0.02);
        }
        
        .standard-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }
        
        .standard-number {
            width: 2rem;
            height: 2rem;
            background: var(--card-border);
            border-radius: 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.875rem;
        }
        
        .standard-card.complete .standard-number {
            background: var(--success);
            color: white;
        }
        
        .standard-content {
            display: none;
            padding: 0 1.25rem 1.25rem;
        }
        
        .standard-card.open .standard-content {
            display: block;
        }
        
        .standard-truth {
            padding: 1rem;
            background: var(--accent-dim);
            border-radius: 0.5rem;
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }
        
        .checklist {
            display: grid;
            gap: 0.5rem;
        }
        
        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 0.5rem;
            cursor: pointer;
        }
        
        .checklist-item:hover {
            background: rgba(255, 255, 255, 0.04);
        }
        
        .checklist-item input {
            width: 1.25rem;
            height: 1.25rem;
            accent-color: var(--accent);
            flex-shrink: 0;
            margin-top: 0.125rem;
        }
        
        .checklist-item.checked label {
            text-decoration: line-through;
            color: var(--text-muted);
        }
        
        .checklist-item label {
            cursor: pointer;
            font-size: 0.875rem;
        }
        
        /* Prompts */
        .prompt-category {
            margin-bottom: 2rem;
        }
        
        .prompt-category-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .prompt-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 0.75rem;
            margin-bottom: 0.75rem;
            overflow: hidden;
        }
        
        .prompt-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            cursor: pointer;
        }
        
        .prompt-header:hover {
            background: rgba(255, 255, 255, 0.02);
        }
        
        .prompt-content {
            display: none;
            padding: 0 1rem 1rem;
        }
        
        .prompt-card.open .prompt-content {
            display: block;
        }
        
        .prompt-text {
            background: #1a1a1a;
            border-radius: 0.5rem;
            padding: 1rem;
            font-family: monospace;
            font-size: 0.875rem;
            white-space: pre-wrap;
            margin-bottom: 1rem;
        }
        
        .light-mode .prompt-text {
            background: #f1f5f9;
        }
        
        /* Footer Actions */
        .footer-actions {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(10, 10, 10, 0.9);
            backdrop-filter: blur(12px);
            border-top: 1px solid var(--card-border);
            padding: 1rem;
            display: none;
        }
        
        .light-mode .footer-actions {
            background: rgba(255, 255, 255, 0.9);
        }
        
        .footer-actions.visible {
            display: block;
        }
        
        .footer-inner {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: flex-end;
            gap: 0.75rem;
        }
        
        /* Saved Indicator */
        .save-indicator {
            position: fixed;
            bottom: 1rem;
            right: 1rem;
            background: var(--success);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
        }
        
        .save-indicator.visible {
            opacity: 1;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            h1 { font-size: 1.75rem; }
            h2 { font-size: 1.5rem; }
            
            .header-inner {
                flex-wrap: wrap;
                gap: 0.75rem;
            }
            
            .tab-nav {
                padding: 0 1rem;
            }
            
            .tab-btn {
                padding: 0.75rem 1rem;
            }
            
            .status-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .lane-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Save Indicator -->
    <div id="saveIndicator" class="save-indicator">‚úì Saved</div>

    <!-- ==================== ONBOARDING ==================== -->
    <div id="onboarding" class="onboarding">
        <div class="onboarding-card">
            <!-- Step 1: Welcome -->
            <div class="onboarding-step active" data-step="1">
                <div style="font-size: 3rem; margin-bottom: 1rem;">‚ö°</div>
                <h1>FANATICAL 2026</h1>
                <p class="subtitle">The Operating System for Predictable Income</p>
                <div class="ceo-line" style="margin: 2rem 0; text-align: left;">
                    "This is not a planner. It's an operating system that runs your business when motivation disappears."
                </div>
                <button class="btn btn-primary" onclick="nextOnboardingStep()">Begin Setup ‚Üí</button>
            </div>

            <!-- Step 2: Identity -->
            <div class="onboarding-step" data-step="2">
                <h2>Let's start with you</h2>
                <p class="subtitle">This personalizes your entire operating system.</p>
                <div style="text-align: left; margin: 2rem 0;">
                    <div class="form-group">
                        <label>Your Name</label>
                        <input type="text" id="ob_name" placeholder="What should we call you?">
                    </div>
                    <div class="form-group">
                        <label>Your 2026 Income Goal</label>
                        <input type="text" id="ob_income_goal" placeholder="e.g., $150,000">
                        <p class="form-hint">Be honest. This becomes your math baseline.</p>
                    </div>
                </div>
                <div style="display: flex; gap: 0.75rem; justify-content: center;">
                    <button class="btn btn-secondary" onclick="prevOnboardingStep()">‚Üê Back</button>
                    <button class="btn btn-primary" onclick="nextOnboardingStep()">Continue ‚Üí</button>
                </div>
            </div>

            <!-- Step 3: Choose Your Lane -->
            <div class="onboarding-step" data-step="3">
                <h2>Choose Your Lane</h2>
                <p class="subtitle">Pick ONE focus for the next 90 days.</p>
                <div class="lane-grid">
                    <label class="lane-option">
                        <input type="radio" name="lane" value="Listings">
                        <div>üìã Listings</div>
                    </label>
                    <label class="lane-option">
                        <input type="radio" name="lane" value="Buyers">
                        <div>üè† Buyers</div>
                    </label>
                    <label class="lane-option">
                        <input type="radio" name="lane" value="Relocation">
                        <div>‚úàÔ∏è Relocation</div>
                    </label>
                    <label class="lane-option">
                        <input type="radio" name="lane" value="Downsizing">
                        <div>üì¶ Downsizing</div>
                    </label>
                    <label class="lane-option">
                        <input type="radio" name="lane" value="First-Time Buyers">
                        <div>üîë First-Time Buyers</div>
                    </label>
                    <label class="lane-option">
                        <input type="radio" name="lane" value="Luxury">
                        <div>üíé Luxury</div>
                    </label>
                </div>
                <div class="lane-warning">
                    <span>‚ö†Ô∏è</span>
                    <span>You may not change lanes for 90 days. Discipline beats novelty.</span>
                </div>
                <div style="display: flex; gap: 0.75rem; justify-content: center; margin-top: 1.5rem;">
                    <button class="btn btn-secondary" onclick="prevOnboardingStep()">‚Üê Back</button>
                    <button class="btn btn-primary" onclick="nextOnboardingStep()">Lock It In ‚Üí</button>
                </div>
            </div>

            <!-- Step 4: Experience -->
            <div class="onboarding-step" data-step="4">
                <h2>One more thing...</h2>
                <p class="subtitle">This helps us tailor guidance.</p>
                <div class="lane-grid" style="grid-template-columns: 1fr;">
                    <label class="lane-option">
                        <input type="radio" name="experience" value="Yes">
                        <div>Yes ‚Äî I've done formal business planning before</div>
                    </label>
                    <label class="lane-option">
                        <input type="radio" name="experience" value="Sort of">
                        <div>Sort of ‚Äî I've set goals but nothing structured</div>
                    </label>
                    <label class="lane-option">
                        <input type="radio" name="experience" value="No">
                        <div>No ‚Äî This is my first real planning system</div>
                    </label>
                </div>
                <div style="display: flex; gap: 0.75rem; justify-content: center; margin-top: 1.5rem;">
                    <button class="btn btn-secondary" onclick="prevOnboardingStep()">‚Üê Back</button>
                    <button class="btn btn-primary" onclick="completeOnboarding()">Launch My Command Center ‚Üí</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== MAIN APP ==================== -->
    <div id="mainApp" class="hidden">
        <!-- Header -->
        <header class="header">
            <div class="header-inner">
                <div class="logo">
                    <div class="logo-icon">‚ö°</div>
                    <span>FANATICAL <span id="currentYear">2026</span></span>
                </div>
                <div class="header-actions">
                    <div class="year-selector">
                        <button class="year-btn" data-year="2025">2025</button>
                        <button class="year-btn active" data-year="2026">2026</button>
                        <button class="year-btn" data-year="2027">2027</button>
                    </div>
                    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">üåô</button>
                </div>
            </div>
            <nav class="tab-nav">
                <button class="tab-btn active" data-tab="command">Command</button>
                <button class="tab-btn" data-tab="learn">Learn</button>
                <button class="tab-btn" data-tab="build">Build</button>
                <button class="tab-btn" data-tab="track">Track</button>
                <button class="tab-btn" data-tab="audit">Audit</button>
                <button class="tab-btn" data-tab="prompts">Prompts</button>
            </nav>
        </header>

        <!-- ==================== COMMAND CENTER ==================== -->
        <div id="tab-command" class="tab-content">
            <div class="container">
                <div class="command-hero">
                    <h1>Welcome back, <span id="userName">Agent</span></h1>
                    <p class="command-question">Am I winning right now?</p>
                </div>

                <div class="status-grid">
                    <div class="status-card">
                        <div class="status-label">Calm Number</div>
                        <div class="status-value" style="color: var(--accent);" id="displayCalmNumber">‚Äî</div>
                        <div class="status-subtext">conversations/week</div>
                    </div>
                    <div class="status-card">
                        <div class="status-label">This Week</div>
                        <div class="status-value" id="displayThisWeek">‚Äî</div>
                        <div class="status-subtext">of target</div>
                    </div>
                    <div class="status-card">
                        <div class="status-label">Energy</div>
                        <div class="status-value" id="displayEnergy">‚Äî</div>
                        <div class="status-subtext" id="displayEnergyTrend">no data yet</div>
                    </div>
                    <div class="status-card">
                        <div class="status-label">Focus</div>
                        <div class="status-value" id="displayFocus">‚Äî</div>
                        <div class="status-subtext" id="displayLane">‚Äî</div>
                    </div>
                </div>

                <div class="action-card">
                    <div class="action-label">
                        <span>‚ö°</span>
                        <span>Recommended Action</span>
                    </div>
                    <div class="action-text" id="recommendedAction">Complete your Plan Builder to activate your Command Center.</div>
                </div>

                <!-- No-Think Mode (hidden by default) -->
                <div id="noThinkMode" class="no-think-mode hidden">
                    <h3>‚ö†Ô∏è NO-THINK MODE‚Ñ¢ ACTIVATED</h3>
                    <p>Your system detected drift or fatigue. For the next 14 days, follow ONLY this:</p>
                    <div class="no-think-rules">
                        <ol>
                            <li>Ignore everything except CEO Hour</li>
                            <li>Hit your Calm Number (nothing more)</li>
                            <li>Do not add new strategies</li>
                            <li>Do not scroll for ideas</li>
                            <li>Review your Brand DNA once</li>
                        </ol>
                    </div>
                    <p class="ceo-line" style="margin-top: 1rem;">"Consistency beats intensity. Always."</p>
                    <div style="margin-top: 1.5rem;">
                        <label style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; cursor: pointer;">
                            <input type="checkbox" id="noThinkCommit" style="width: 1.25rem; height: 1.25rem;">
                            <span>I commit to No-Think Mode for 14 days</span>
                        </label>
                    </div>
                </div>

                <div class="quick-ref" id="quickRef">
                    <div class="quick-ref-header">
                        <span class="quick-ref-title">üìã My Operating Rules</span>
                        <button class="btn btn-ghost" onclick="toggleQuickRef()">Collapse</button>
                    </div>
                    <div class="quick-ref-grid" id="quickRefContent">
                        <div class="quick-ref-item">
                            <span class="quick-ref-label">Lane</span>
                            <span class="quick-ref-value" id="qrLane">‚Äî</span>
                        </div>
                        <div class="quick-ref-item">
                            <span class="quick-ref-label">Calm Number</span>
                            <span class="quick-ref-value" id="qrCalmNumber">‚Äî</span>
                        </div>
                        <div class="quick-ref-item">
                            <span class="quick-ref-label">CEO Hour</span>
                            <span class="quick-ref-value" id="qrCeoHour">‚Äî</span>
                        </div>
                        <div class="quick-ref-item">
                            <span class="quick-ref-label">30-Day Focus</span>
                            <span class="quick-ref-value" id="qr30DayFocus">‚Äî</span>
                        </div>
                        <div class="quick-ref-item">
                            <span class="quick-ref-label">If Stuck</span>
                            <span class="quick-ref-value">Text 3 past clients</span>
                        </div>
                        <div class="quick-ref-item">
                            <span class="quick-ref-label">If Overwhelmed</span>
                            <span class="quick-ref-value">Trigger No-Think Mode</span>
                        </div>
                    </div>
                </div>

                <div class="nav-grid">
                    <div class="nav-card" onclick="switchTab('learn')">
                        <div class="nav-card-icon">üìñ</div>
                        <div class="nav-card-title">Learn</div>
                        <div class="nav-card-status">The Method</div>
                    </div>
                    <div class="nav-card" onclick="switchTab('build')">
                        <div class="nav-card-icon">üîß</div>
                        <div class="nav-card-title">Build</div>
                        <div class="nav-card-status" id="buildStatus">Not started</div>
                    </div>
                    <div class="nav-card" onclick="switchTab('track')">
                        <div class="nav-card-icon">üìä</div>
                        <div class="nav-card-title">Track</div>
                        <div class="nav-card-status" id="trackStatus">0/12 months</div>
                    </div>
                    <div class="nav-card" onclick="switchTab('audit')">
                        <div class="nav-card-icon">‚úì</div>
                        <div class="nav-card-title">Audit</div>
                        <div class="nav-card-status" id="auditStatus">0/14 complete</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== LEARN TAB ==================== -->
        <div id="tab-learn" class="tab-content hidden">
            <div class="container">
                <!-- Hero -->
                <div class="method-section" style="text-align: center; border-bottom: none; padding-top: 1rem;">
                    <h1>The FANATICAL Method‚Ñ¢</h1>
                    <p style="color: var(--text-secondary); max-width: 600px; margin: 1rem auto;">A disciplined operating system for agents who want predictable income without burnout.</p>
                    <div class="ceo-line" style="max-width: 600px; margin: 2rem auto;">
                        "2026 doesn't care about your intention. It responds to your actions."
                    </div>
                </div>

                <!-- Why Plans Fail -->
                <div class="method-section">
                    <div class="section-badge">‚ö†Ô∏è The Problem</div>
                    <h2>Why Most Plans Fail</h2>
                    <p style="color: var(--text-secondary); margin: 1rem 0 1.5rem;">Most real estate planning falls into one of three traps:</p>
                    <div class="triad-grid">
                        <div class="card">
                            <h4>The Inspiration Trap</h4>
                            <p style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 0.5rem;">Plans built on motivation fail when motivation disappears. And it always disappears.</p>
                        </div>
                        <div class="card">
                            <h4>The Complexity Trap</h4>
                            <p style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 0.5rem;">Too many metrics, tools, and strategies. Overwhelm leads to paralysis, not progress.</p>
                        </div>
                        <div class="card">
                            <h4>The Comparison Trap</h4>
                            <p style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 0.5rem;">Chasing what works for others. Their strategy isn't your strategy. Their clients aren't your clients.</p>
                        </div>
                    </div>
                    <div class="ceo-line" style="margin-top: 1.5rem;">
                        "If your business requires you to feel inspired to function, it's not a business‚Äîit's a hobby."
                    </div>
                </div>

                <!-- 5-Layer Framework -->
                <div class="method-section">
                    <div class="section-badge">üèóÔ∏è The Framework</div>
                    <h2>The 5-Layer Operating System</h2>
                    <p style="color: var(--text-secondary); margin: 1rem 0 1.5rem;">Build from the inside out. Each layer supports the next.</p>
                    <div class="layer-grid">
                        <div class="layer-card">
                            <div class="layer-number">1</div>
                            <div class="layer-content">
                                <h4>IDENTITY</h4>
                                <p>"What kind of business am I building?"</p>
                            </div>
                        </div>
                        <div class="layer-card">
                            <div class="layer-number">2</div>
                            <div class="layer-content">
                                <h4>DISCIPLINE</h4>
                                <p>"Who do I serve best?"</p>
                            </div>
                        </div>
                        <div class="layer-card">
                            <div class="layer-number">3</div>
                            <div class="layer-content">
                                <h4>STRATEGY</h4>
                                <p>"I help _____ decide _____."</p>
                            </div>
                        </div>
                        <div class="layer-card">
                            <div class="layer-number">4</div>
                            <div class="layer-content">
                                <h4>EXECUTION</h4>
                                <p>"What does a good week look like?"</p>
                            </div>
                        </div>
                        <div class="layer-card">
                            <div class="layer-number">5</div>
                            <div class="layer-content">
                                <h4>FEEDBACK</h4>
                                <p>"How do I know if I'm winning?"</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Discipline Triad -->
                <div class="method-section">
                    <div class="section-badge">üéØ The Discipline Triad</div>
                    <h2>Three Questions That Define Your Business</h2>
                    <div class="triad-grid" style="margin-top: 1.5rem;">
                        <div class="card" style="text-align: center;">
                            <h4 style="color: var(--accent);">Who Do I Serve?</h4>
                            <p style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 0.5rem;">Your primary discipline. Not everyone‚Äîsomeone.</p>
                        </div>
                        <div class="card" style="text-align: center;">
                            <h4 style="color: var(--accent);">What Decision?</h4>
                            <p style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 0.5rem;">The specific decision you help them make.</p>
                        </div>
                        <div class="card" style="text-align: center;">
                            <h4 style="color: var(--accent);">Who NOT For?</h4>
                            <p style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 0.5rem;">Clarity includes knowing who to decline.</p>
                        </div>
                    </div>
                    <div class="ceo-line" style="margin-top: 1.5rem;">
                        "Specialization is not limitation. It is leverage."
                    </div>
                </div>

                <!-- The Math -->
                <div class="method-section">
                    <div class="section-badge">üî¢ The Math</div>
                    <h2>Reverse Engineer Your 2026</h2>
                    <p style="color: var(--text-secondary); margin: 1rem 0 1.5rem;">Start with income. Work backwards to weekly actions.</p>
                    <div class="card" style="text-align: center; padding: 2rem;">
                        <p style="color: var(--text-muted); margin-bottom: 1rem;">The Formula</p>
                        <p style="font-size: 1.25rem;">
                            <strong>Income Goal</strong> √∑ <strong>Avg Commission</strong> = <strong>Deals Needed</strong>
                        </p>
                        <p style="margin: 1rem 0;">‚Üì</p>
                        <p style="font-size: 1.25rem;">
                            <strong>Deals</strong> √ó <strong>Appointments per Deal</strong> = <strong>Appointments Needed</strong>
                        </p>
                        <p style="margin: 1rem 0;">‚Üì</p>
                        <p style="font-size: 1.25rem;">
                            <strong>Appointments</strong> √∑ <strong>52 weeks</strong> = <strong style="color: var(--accent);">Your Calm Number</strong>
                        </p>
                    </div>
                    <div class="ceo-line" style="margin-top: 1.5rem;">
                        "If you don't know your number, you're working on vibes."
                    </div>
                </div>

                <!-- Three Pillars -->
                <div class="method-section">
                    <div class="section-badge">üìÖ Weekly Execution</div>
                    <h2>Three Pillars of a Fanatical Week</h2>
                    <div class="triad-grid" style="margin-top: 1.5rem;">
                        <div class="card">
                            <h4>üí¨ Conversations</h4>
                            <p style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 0.5rem;">Hit your weekly conversation target. This is non-negotiable. Everything else can flex.</p>
                        </div>
                        <div class="card">
                            <h4>üëÅÔ∏è Visibility</h4>
                            <p style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 0.5rem;">One consistent presence action. Show up where your discipline lives.</p>
                        </div>
                        <div class="card">
                            <h4>üéØ CEO Hour</h4>
                            <p style="color: var(--text-secondary); font-size: 0.875rem; margin-top: 0.5rem;">Same time every week. Review, adjust, recommit. This is how you run your business.</p>
                        </div>
                    </div>
                    <div class="ceo-line" style="margin-top: 1.5rem;">
                        "If you don't run your business weekly, your emotions will run it daily."
                    </div>
                </div>

                <!-- Scorecard -->
                <div class="method-section">
                    <div class="section-badge">üìä The Scorecard</div>
                    <h2>Five Metrics. That's It.</h2>
                    <p style="color: var(--text-secondary); margin: 1rem 0 1.5rem;">More metrics create confusion. These five tell the truth.</p>
                    <div class="card">
                        <div style="display: grid; gap: 1rem;">
                            <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid var(--card-border);">
                                <span><strong>Weekly:</strong> Meaningful Conversations</span>
                                <span class="pill pill-neutral">Lead indicator</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid var(--card-border);">
                                <span><strong>Weekly:</strong> Follow-ups Completed</span>
                                <span class="pill pill-neutral">Lead indicator</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid var(--card-border);">
                                <span><strong>Monthly:</strong> Content Published</span>
                                <span class="pill pill-neutral">Visibility metric</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 0.75rem 0; border-bottom: 1px solid var(--card-border);">
                                <span><strong>Monthly:</strong> Appointments Set</span>
                                <span class="pill pill-neutral">Conversion metric</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; padding: 0.75rem 0;">
                                <span><strong>Quarterly:</strong> Pipeline Ratio</span>
                                <span class="pill pill-neutral">Health metric</span>
                            </div>
                        </div>
                    </div>
                    <div class="ceo-line" style="margin-top: 1.5rem;">
                        "Fewer metrics. More honesty."
                    </div>
                </div>

                <!-- CEO Lines -->
                <div class="method-section">
                    <div class="section-badge">üí¨ CEO Lines</div>
                    <h2>The 12 CEO Lines</h2>
                    <p style="color: var(--text-secondary); margin: 1rem 0 1.5rem;">Reference these when motivation fails. They don't.</p>
                    <div class="ceo-lines-grid">
                        <div class="ceo-line-card">
                            <div class="ceo-line-number">01</div>
                            <div class="ceo-line-text">"If your business requires you to feel inspired to function, it's not a business‚Äîit's a hobby."</div>
                        </div>
                        <div class="ceo-line-card">
                            <div class="ceo-line-number">02</div>
                            <div class="ceo-line-text">"Clarity feels boring at first‚Äîbecause chaos is loud."</div>
                        </div>
                        <div class="ceo-line-card">
                            <div class="ceo-line-number">03</div>
                            <div class="ceo-line-text">"Your job is not to close deals. Your job is to have enough conversations that closings become inevitable."</div>
                        </div>
                        <div class="ceo-line-card">
                            <div class="ceo-line-number">04</div>
                            <div class="ceo-line-text">"If you don't know your number, you're working on vibes."</div>
                        </div>
                        <div class="ceo-line-card">
                            <div class="ceo-line-number">05</div>
                            <div class="ceo-line-text">"Goals don't build businesses. Standards do."</div>
                        </div>
                        <div class="ceo-line-card">
                            <div class="ceo-line-number">06</div>
                            <div class="ceo-line-text">"If you don't run your business weekly, your emotions will run it daily."</div>
                        </div>
                        <div class="ceo-line-card">
                            <div class="ceo-line-number">07</div>
                            <div class="ceo-line-text">"People trust clarity more than charisma."</div>
                        </div>
                        <div class="ceo-line-card">
                            <div class="ceo-line-number">08</div>
                            <div class="ceo-line-text">"Top producers don't wait to feel ready. They act and adjust."</div>
                        </div>
                        <div class="ceo-line-card">
                            <div class="ceo-line-number">09</div>
                            <div class="ceo-line-text">"Fewer metrics. More honesty."</div>
                        </div>
                        <div class="ceo-line-card">
                            <div class="ceo-line-number">10</div>
                            <div class="ceo-line-text">"AI doesn't replace thinking. It multiplies clarity."</div>
                        </div>
                        <div class="ceo-line-card">
                            <div class="ceo-line-number">11</div>
                            <div class="ceo-line-text">"We earn leverage. We don't rush it."</div>
                        </div>
                        <div class="ceo-line-card">
                            <div class="ceo-line-number">12</div>
                            <div class="ceo-line-text">"2026 doesn't care about your intention. It responds to your actions."</div>
                        </div>
                    </div>
                </div>

                <!-- CTA -->
                <div class="method-section" style="text-align: center; border-bottom: none;">
                    <h2>Ready to Build Your System?</h2>
                    <p style="color: var(--text-secondary); margin: 1rem 0 1.5rem;">The Method is the foundation. Now make it yours.</p>
                    <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
                        <button class="btn btn-primary" onclick="switchTab('build')">Build My Plan ‚Üí</button>
                        <button class="btn btn-secondary" onclick="switchTab('audit')">Audit My Standards</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ==================== BUILD TAB ==================== -->
        <div id="tab-build" class="tab-content hidden">
            <div class="container" style="max-width: 700px;">
                <!-- Progress -->
                <div class="builder-progress">
                    <div class="builder-progress-text">
                        <span>Step <span id="currentStep">1</span> of 14</span>
                        <span id="progressPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 7%;"></div>
                    </div>
                </div>

                <!-- Step 1: Welcome -->
                <div class="builder-step active" data-step="1">
                    <h2>Build Your 2026 Operating System</h2>
                    <p class="step-description">This isn't a vision board. It's the blueprint for a business that runs whether you feel like it or not.</p>
                    <div class="ceo-line" style="margin: 1.5rem 0;">
                        "Goals don't build businesses. Standards do."
                    </div>
                    <div class="form-group">
                        <label>Before we begin, what's your honest assessment of where you are right now?</label>
                        <textarea id="opening_reflection" placeholder="Be honest. No one sees this but you."></textarea>
                    </div>
                </div>

                <!-- Step 2: Your Info -->
                <div class="builder-step" data-step="2">
                    <h2>Your Foundation</h2>
                    <p class="step-description">The basics that anchor everything else.</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Your Name</label>
                            <input type="text" id="name" placeholder="What should we call you?">
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="email" placeholder="your@email.com">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Market Area</label>
                        <input type="text" id="market_area" placeholder="e.g., Northern Colorado, Denver Metro">
                    </div>
                </div>

                <!-- Step 3: Discipline - Who -->
                <div class="builder-step" data-step="3">
                    <h2>The Discipline Triad (Part 1)</h2>
                    <p class="step-description">Clarity about WHO you serve is the foundation of everything.</p>
                    <div class="ceo-line" style="margin-bottom: 1.5rem;">
                        "Specialization is not limitation. It is leverage."
                    </div>
                    <div class="form-group">
                        <label>Who do you serve best?</label>
                        <textarea id="who_i_serve" placeholder="e.g., First-time homebuyers in Northern Colorado who feel overwhelmed by the process and need patient guidance..."></textarea>
                        <p class="form-hint">Be specific. Not "everyone" ‚Äî someone.</p>
                    </div>
                </div>

                <!-- Step 4: Discipline - Decision + Not For -->
                <div class="builder-step" data-step="4">
                    <h2>The Discipline Triad (Part 2)</h2>
                    <p class="step-description">What decision do you help them make? And who are you NOT for?</p>
                    <div class="form-group">
                        <label>What decision do you help them make?</label>
                        <textarea id="what_decision" placeholder="e.g., Whether now is the right time to buy their first home, and if so, how to do it without feeling overwhelmed..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Who are you NOT for?</label>
                        <textarea id="who_not_for" placeholder="e.g., Investors looking for quick flips, people who want to be pressured into decisions, anyone who isn't ready to be honest about their finances..."></textarea>
                        <p class="form-hint">Clarity includes knowing who to decline.</p>
                    </div>
                </div>

                <!-- Step 5: Brand Voice -->
                <div class="builder-step" data-step="5">
                    <h2>Your Brand Voice</h2>
                    <p class="step-description">How do you sound? How should people feel?</p>
                    <div class="form-group">
                        <label>My voice feels like... (3-5 words)</label>
                        <input type="text" id="voice_feels_like" placeholder="e.g., Calm, knowledgeable, supportive, direct, encouraging">
                    </div>
                    <div class="form-group">
                        <label>When clients work with me, they feel...</label>
                        <textarea id="clients_feel" placeholder="e.g., Safe to ask questions, confident they're making the right choice, never pressured..."></textarea>
                    </div>
                </div>

                <!-- Step 6: Brand Language -->
                <div class="builder-step" data-step="6">
                    <h2>Your Brand Language</h2>
                    <p class="step-description">The words you use (and refuse to use) define your brand.</p>
                    <div class="form-group">
                        <label>Go-to phrases I use often</label>
                        <textarea id="go_to_phrases" placeholder='e.g., "Let me walk you through this", "There are no stupid questions", "Here is what the data actually shows"...'></textarea>
                    </div>
                    <div class="form-group">
                        <label>Words/phrases I REFUSE to use</label>
                        <textarea id="words_avoid" placeholder='e.g., "Act now or lose out!", "This won''t last!", "You''d be crazy not to..."'></textarea>
                        <p class="form-hint">Your AI clone needs to know your boundaries.</p>
                    </div>
                </div>

                <!-- Step 7: Differentiator + Beliefs -->
                <div class="builder-step" data-step="7">
                    <h2>What Makes You Different</h2>
                    <p class="step-description">Not better. Different. Why you and not someone else?</p>
                    <div class="form-group">
                        <label>What do you do differently?</label>
                        <textarea id="differentiator" placeholder="e.g., I specialize in $0-down programs and actually take time to explain each option. Most agents don't know these programs exist..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>What do you believe about real estate that others might disagree with?</label>
                        <textarea id="what_i_believe" placeholder="e.g., I believe everyone deserves a patient agent, not just luxury buyers. The process matters as much as the outcome..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>What will you NEVER do, even if it costs you business?</label>
                        <textarea id="what_i_refuse" placeholder="e.g., I will never pressure someone into a decision they're not ready for, even if I lose the deal..."></textarea>
                    </div>
                </div>

                <!-- Step 8: CTA + Known For -->
                <div class="builder-step" data-step="8">
                    <h2>Your Call to Action</h2>
                    <p class="step-description">How do you invite people in? What do you want to be known for?</p>
                    <div class="form-group">
                        <label>Your preferred call-to-action style</label>
                        <textarea id="cta_style" placeholder='e.g., "Ready to explore your options? Let me know and we will find a time to talk‚Äîno pressure, just clarity."'></textarea>
                    </div>
                    <div class="form-group">
                        <label>When people think of you, they think...</label>
                        <textarea id="known_for" placeholder="e.g., The agent who actually explains things. The first-time buyer expert. The calm one who doesn't pressure..."></textarea>
                    </div>
                </div>

                <!-- Step 9: Clone Context Part 1 -->
                <div class="builder-step" data-step="9">
                    <h2>Clone Context (Part 1)</h2>
                    <p class="step-description">This helps AI understand HOW you think, not just what you say.</p>
                    <div class="ceo-line" style="margin-bottom: 1.5rem;">
                        "AI doesn't replace thinking. It multiplies clarity."
                    </div>
                    <div class="form-group">
                        <label>What's your primary business focus right now?</label>
                        <input type="text" id="business_focus" placeholder="e.g., Building first-time buyer pipeline, listing presentations, brand awareness">
                    </div>
                    <div class="form-group">
                        <label>Where do most of your leads come from?</label>
                        <input type="text" id="lead_source" placeholder="e.g., Referrals, social media, open houses, sphere of influence">
                    </div>
                    <div class="form-group">
                        <label>How do you prefer to make decisions?</label>
                        <textarea id="decision_style" placeholder="e.g., I like to gather data first, then trust my gut. I usually sleep on big decisions..."></textarea>
                    </div>
                </div>

                <!-- Step 10: Clone Context Part 2 -->
                <div class="builder-step" data-step="10">
                    <h2>Clone Context (Part 2)</h2>
                    <p class="step-description">The emotional layer that makes your clone sound like YOU.</p>
                    <div class="form-group">
                        <label>What's your clients' biggest fear or hesitation?</label>
                        <textarea id="client_fear" placeholder="e.g., Making a mistake they can't undo, missing out, not being able to afford it, being judged..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>What do you find yourself explaining over and over?</label>
                        <textarea id="repeat_explanation" placeholder="e.g., How down payment assistance works, why pre-approval matters, what closing costs actually are..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Why do you care about this work? (Honest answer)</label>
                        <textarea id="why_i_care" placeholder="e.g., I remember how scary it was buying my first home. I want to be the agent I wish I'd had..."></textarea>
                    </div>
                </div>

                <!-- Step 11: Decision Engine -->
                <div class="builder-step" data-step="11">
                    <h2>The FANATICAL Decision Engine‚Ñ¢</h2>
                    <p class="step-description">When two good options conflict, how does your business decide? Check the ones that match your values.</p>
                    <div class="ceo-line" style="margin-bottom: 1.5rem;">
                        "This is how you outsell others‚Äîby deciding faster and better, every time."
                    </div>
                    <div class="decision-grid">
                        <label class="decision-item">
                            <input type="checkbox" id="decision_trust" checked>
                            <span>Long-term trust</span>
                            <span class="decision-over">over short-term commission</span>
                        </label>
                        <label class="decision-item">
                            <input type="checkbox" id="decision_accuracy" checked>
                            <span>Accuracy</span>
                            <span class="decision-over">over speed</span>
                        </label>
                        <label class="decision-item">
                            <input type="checkbox" id="decision_education" checked>
                            <span>Education</span>
                            <span class="decision-over">over urgency</span>
                        </label>
                        <label class="decision-item">
                            <input type="checkbox" id="decision_relationships" checked>
                            <span>Relationships</span>
                            <span class="decision-over">over volume</span>
                        </label>
                        <label class="decision-item">
                            <input type="checkbox" id="decision_simplicity" checked>
                            <span>Simplicity</span>
                            <span class="decision-over">over complexity</span>
                        </label>
                        <label class="decision-item">
                            <input type="checkbox" id="decision_consistency" checked>
                            <span>Consistency</span>
                            <span class="decision-over">over novelty</span>
                        </label>
                    </div>
                    <div class="form-group" style="margin-top: 1.5rem;">
                        <label>Add your own decision rule (optional)</label>
                        <input type="text" id="custom_decision" placeholder='e.g., "Client comfort over closing speed"'>
                    </div>
                </div>

                <!-- Step 12: The Math -->
                <div class="builder-step" data-step="12">
                    <h2>Reverse Engineer Your 2026</h2>
                    <p class="step-description">Let's find your Calm Number ‚Äî the weekly conversation target that makes everything else inevitable.</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>2026 Income Goal</label>
                            <input type="text" id="income_goal" placeholder="e.g., $150,000">
                        </div>
                        <div class="form-group">
                            <label>Average Commission</label>
                            <input type="text" id="avg_commission" placeholder="e.g., $8,000">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Deals Needed (Income √∑ Commission)</label>
                        <input type="text" id="deals_needed" placeholder="Auto-calculates or enter manually">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Appointments per Deal</label>
                            <input type="text" id="appt_ratio" placeholder="e.g., 4">
                            <p class="form-hint">How many appointments to close 1 deal?</p>
                        </div>
                        <div class="form-group">
                            <label>Total Appointments Needed</label>
                            <input type="text" id="appointments_needed" placeholder="Auto-calculates">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Weekly Conversations (Your Calm Number)</label>
                        <input type="text" id="weekly_conversations" placeholder="Appointments √∑ 52" style="font-size: 1.25rem; font-weight: 600; text-align: center;">
                        <p class="form-hint">This is your non-negotiable weekly target.</p>
                    </div>
                    <div class="ceo-line" style="margin-top: 1.5rem;">
                        "Your job is not to close deals. Your job is to have enough conversations that closings become inevitable."
                    </div>
                </div>

                <!-- Step 13: Weekly Standards -->
                <div class="builder-step" data-step="13">
                    <h2>Your Weekly Standards</h2>
                    <p class="step-description">Lock in the structure that runs your business.</p>
                    <div class="form-row">
                        <div class="form-group">
                            <label>CEO Hour Day</label>
                            <select id="ceo_hour_day">
                                <option value="">Select a day...</option>
                                <option value="Monday">Monday</option>
                                <option value="Tuesday">Tuesday</option>
                                <option value="Wednesday">Wednesday</option>
                                <option value="Thursday">Thursday</option>
                                <option value="Friday">Friday</option>
                                <option value="Saturday">Saturday</option>
                                <option value="Sunday">Sunday</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>CEO Hour Time</label>
                            <input type="text" id="ceo_hour_time" placeholder="e.g., 9:00 AM">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Visibility Commitment</label>
                        <textarea id="visibility_commitment" placeholder="e.g., One educational video per week on Instagram, posted every Tuesday"></textarea>
                        <p class="form-hint">What's your one consistent visibility action?</p>
                    </div>
                    <div class="form-group">
                        <label>30-Day Focus (What's the ONE priority right now?)</label>
                        <input type="text" id="thirty_day_focus" placeholder="e.g., Database reactivation campaign">
                    </div>
                    <div class="form-group">
                        <label>Distractions I will IGNORE this quarter</label>
                        <textarea id="ignore_distractions" placeholder="e.g., New social platforms, shiny object marketing tactics, comparing myself to luxury agents..."></textarea>
                    </div>
                </div>

                <!-- Step 14: Success -->
                <div class="builder-step" data-step="14">
                    <div class="success-screen">
                        <div class="success-icon">‚úì</div>
                        <h2>Your Operating System is Ready</h2>
                        <p style="color: var(--text-secondary); margin-bottom: 2rem;">Your Calm Number:</p>
                        <div class="calm-number-display" id="finalCalmNumber">8</div>
                        <div class="calm-number-label">meaningful conversations per week</div>
                        
                        <div style="display: flex; gap: 0.75rem; justify-content: center; flex-wrap: wrap; margin: 2rem 0;">
                            <button class="btn btn-primary" onclick="copyBrandDNA()">üìã Copy Brand DNA</button>
                            <button class="btn btn-secondary" onclick="downloadPlan()">‚¨áÔ∏è Download Plan</button>
                        </div>
                        
                        <details style="text-align: left; margin-top: 2rem;">
                            <summary style="cursor: pointer; font-weight: 600; margin-bottom: 1rem;">View Brand DNA + Clone Export</summary>
                            <div class="brand-dna-output" id="brandDnaOutput"></div>
                        </details>
                    </div>
                </div>

                <!-- Navigation -->
                <div class="builder-nav" id="builderNav">
                    <button class="btn btn-secondary" id="prevBtn" onclick="prevBuilderStep()">‚Üê Back</button>
                    <button class="btn btn-primary" id="nextBtn" onclick="nextBuilderStep()">Continue ‚Üí</button>
                </div>
            </div>
        </div>

        <!-- ==================== TRACK TAB ==================== -->
        <div id="tab-track" class="tab-content hidden">
            <div class="container">
                <div style="text-align: center; margin-bottom: 2rem;">
                    <h1>FANATICAL Pulse Check‚Ñ¢</h1>
                    <p style="color: var(--text-secondary);">Monthly accountability. Quarterly truth.</p>
                    <div style="margin-top: 1rem;">
                        <div class="progress-bar" style="max-width: 400px; margin: 0 auto;">
                            <div class="progress-fill" id="yearProgress" style="width: 0%;"></div>
                        </div>
                        <p style="font-size: 0.875rem; color: var(--text-muted); margin-top: 0.5rem;" id="yearProgressText">0/12 months completed</p>
                    </div>
                </div>

                <!-- Month Tabs -->
                <div class="month-tabs" id="monthTabs">
                    <!-- Generated by JS -->
                </div>

                <!-- Month Content -->
                <div id="monthContent">
                    <!-- Generated by JS -->
                </div>

                <div style="display: flex; gap: 0.75rem; justify-content: center; margin-top: 2rem;">
                    <button class="btn btn-secondary" onclick="exportPulseCheck()">‚¨áÔ∏è Export Year Data</button>
                </div>
            </div>
        </div>

        <!-- ==================== AUDIT TAB ==================== -->
        <div id="tab-audit" class="tab-content hidden">
            <div class="container">
                <div class="standards-progress">
                    <h2><span id="standardsComplete">0</span>/14</h2>
                    <p style="color: var(--text-secondary);">Professional Standards Complete</p>
                    <p style="color: var(--text-muted); font-size: 0.875rem; margin-top: 0.5rem;" id="standardsGaps">14 gaps remaining</p>
                </div>

                <div id="standardsList">
                    <!-- Generated by JS -->
                </div>

                <div style="display: flex; gap: 0.75rem; justify-content: center; margin-top: 2rem;">
                    <button class="btn btn-secondary" onclick="exportStandards()">‚¨áÔ∏è Export Audit</button>
                </div>
            </div>
        </div>

        <!-- ==================== PROMPTS TAB ==================== -->
        <div id="tab-prompts" class="tab-content hidden">
            <div class="container" style="max-width: 800px;">
                <div style="text-align: center; margin-bottom: 2rem;">
                    <h1>FANATICAL AI Prompt Pack‚Ñ¢</h1>
                    <p style="color: var(--text-secondary);">Copy-paste prompts that use YOUR Brand DNA automatically.</p>
                </div>

                <div id="promptsContent">
                    <!-- Generated by JS -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== STATE MANAGEMENT ====================
        const STORAGE_KEY = 'fanatical2026';
        
        let state = {
            onboardingComplete: false,
            year: 2026,
            theme: 'dark',
            profile: {
                name: '',
                incomeGoal: '',
                lane: '',
                laneLockDate: null,
                experience: ''
            },
            plan: {},
            pulse: {},
            standards: {},
            noThinkMode: {
                active: false,
                startDate: null
            }
        };

        // Load state from localStorage
        function loadState() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (saved) {
                try {
                    state = { ...state, ...JSON.parse(saved) };
                } catch (e) {
                    console.error('Error loading state:', e);
                }
            }
        }

        // Save state to localStorage
        function saveState() {
            localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
            showSaveIndicator();
        }

        // Show save indicator
        function showSaveIndicator() {
            const indicator = document.getElementById('saveIndicator');
            indicator.classList.add('visible');
            setTimeout(() => indicator.classList.remove('visible'), 1500);
        }

        // ==================== INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', function() {
            loadState();
            
            if (state.onboardingComplete) {
                document.getElementById('onboarding').classList.add('hidden');
                document.getElementById('mainApp').classList.remove('hidden');
                initMainApp();
            } else {
                initOnboarding();
            }
            
            // Apply theme
            if (state.theme === 'light') {
                document.body.classList.add('light-mode');
            }
            
            // Setup year selector
            document.querySelectorAll('.year-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.year == state.year) {
                    btn.classList.add('active');
                }
                btn.addEventListener('click', () => selectYear(btn.dataset.year));
            });
            
            // Setup tab navigation
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => switchTab(btn.dataset.tab));
            });
            
            // Setup lane selection
            document.querySelectorAll('.lane-option').forEach(option => {
                option.addEventListener('click', function() {
                    document.querySelectorAll('.lane-option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    this.querySelector('input').checked = true;
                });
            });
        });

        // ==================== ONBOARDING ====================
        let onboardingStep = 1;

        function initOnboarding() {
            updateOnboardingStep();
        }

        function updateOnboardingStep() {
            document.querySelectorAll('.onboarding-step').forEach(step => {
                step.classList.remove('active');
                if (parseInt(step.dataset.step) === onboardingStep) {
                    step.classList.add('active');
                }
            });
        }

        function nextOnboardingStep() {
            if (onboardingStep === 2) {
                state.profile.name = document.getElementById('ob_name').value;
                state.profile.incomeGoal = document.getElementById('ob_income_goal').value;
            }
            if (onboardingStep === 3) {
                const selected = document.querySelector('input[name="lane"]:checked');
                if (selected) {
                    state.profile.lane = selected.value;
                    state.profile.laneLockDate = new Date().toISOString();
                }
            }
            onboardingStep++;
            updateOnboardingStep();
        }

        function prevOnboardingStep() {
            onboardingStep--;
            updateOnboardingStep();
        }

        function completeOnboarding() {
            const selected = document.querySelector('input[name="experience"]:checked');
            if (selected) {
                state.profile.experience = selected.value;
            }
            state.onboardingComplete = true;
            saveState();
            
            document.getElementById('onboarding').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            initMainApp();
        }

        // ==================== MAIN APP ====================
        function initMainApp() {
            updateCommandCenter();
            initPlanBuilder();
            initPulseCheck();
            initStandards();
            initPrompts();
        }

        function switchTab(tabName) {
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.tab === tabName) {
                    btn.classList.add('active');
                }
            });
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.getElementById('tab-' + tabName).classList.remove('hidden');
            
            if (tabName === 'command') {
                updateCommandCenter();
            }
        }

        function selectYear(year) {
            state.year = parseInt(year);
            document.querySelectorAll('.year-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.year == year) {
                    btn.classList.add('active');
                }
            });
            document.getElementById('currentYear').textContent = year;
            saveState();
        }

        function toggleTheme() {
            state.theme = state.theme === 'dark' ? 'light' : 'dark';
            document.body.classList.toggle('light-mode');
            saveState();
        }

        // ==================== COMMAND CENTER ====================
        function updateCommandCenter() {
            // User name
            document.getElementById('userName').textContent = state.profile.name || 'Agent';
            
            // Calm number
            const calmNumber = state.plan.weekly_conversations || '‚Äî';
            document.getElementById('displayCalmNumber').textContent = calmNumber;
            
            // Quick reference
            document.getElementById('qrLane').textContent = state.profile.lane ? `${state.profile.lane} (${getDaysRemaining()} days)` : '‚Äî';
            document.getElementById('qrCalmNumber').textContent = calmNumber !== '‚Äî' ? `${calmNumber}/week` : '‚Äî';
            document.getElementById('qrCeoHour').textContent = state.plan.ceo_hour_day && state.plan.ceo_hour_time ? 
                `${state.plan.ceo_hour_day}s ${state.plan.ceo_hour_time}` : '‚Äî';
            document.getElementById('qr30DayFocus').textContent = state.plan.thirty_day_focus || '‚Äî';
            
            // Focus status
            document.getElementById('displayLane').textContent = state.profile.lane || 'Not set';
            
            // Build status
            const planComplete = state.plan.weekly_conversations ? 'Complete' : 'Not started';
            document.getElementById('buildStatus').textContent = planComplete;
            
            // Track status
            const monthsComplete = Object.keys(state.pulse).filter(k => state.pulse[k]?.closings).length;
            document.getElementById('trackStatus').textContent = `${monthsComplete}/12 months`;
            
            // Audit status
            const standardsComplete = countCompleteStandards();
            document.getElementById('auditStatus').textContent = `${standardsComplete}/14 complete`;
            
            // Recommended action
            updateRecommendedAction();
            
            // Check for No-Think Mode triggers
            checkNoThinkModeTriggers();
        }

        function getDaysRemaining() {
            if (!state.profile.laneLockDate) return 90;
            const lockDate = new Date(state.profile.laneLockDate);
            const now = new Date();
            const diffDays = Math.ceil((lockDate.getTime() + 90*24*60*60*1000 - now.getTime()) / (24*60*60*1000));
            return Math.max(0, diffDays);
        }

        function updateRecommendedAction() {
            const actions = [];
            
            if (!state.plan.weekly_conversations) {
                actions.push('Complete your Plan Builder to activate your Command Center.');
            } else {
                const currentMonth = new Date().toLocaleString('default', { month: 'long' });
                if (!state.pulse[currentMonth]?.closings) {
                    actions.push(`Complete your ${currentMonth} Pulse Check.`);
                }
                
                const standardsComplete = countCompleteStandards();
                if (standardsComplete < 14) {
                    actions.push(`${14 - standardsComplete} Standards gaps remain. Start with the first incomplete one.`);
                }
                
                if (actions.length === 0) {
                    actions.push(`Hit your Calm Number: ${state.plan.weekly_conversations} conversations this week.`);
                }
            }
            
            document.getElementById('recommendedAction').textContent = actions[0];
        }

        function checkNoThinkModeTriggers() {
            // Check for low energy or drifting in recent months
            const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                           'July', 'August', 'September', 'October', 'November', 'December'];
            const currentMonthIndex = new Date().getMonth();
            
            let lowEnergyCount = 0;
            let driftingCount = 0;
            
            for (let i = Math.max(0, currentMonthIndex - 2); i <= currentMonthIndex; i++) {
                const month = months[i];
                if (state.pulse[month]?.energy === 'Low') lowEnergyCount++;
                if (state.pulse[month]?.focus === 'Drifting') driftingCount++;
            }
            
            if (lowEnergyCount >= 2 || driftingCount >= 2) {
                document.getElementById('noThinkMode').classList.remove('hidden');
            }
        }

        function toggleQuickRef() {
            const content = document.getElementById('quickRefContent');
            content.classList.toggle('hidden');
        }

        // ==================== PLAN BUILDER ====================
        let builderStep = 1;
        const totalBuilderSteps = 14;
        const builderFields = [
            'opening_reflection', 'name', 'email', 'market_area',
            'who_i_serve', 'what_decision', 'who_not_for',
            'voice_feels_like', 'clients_feel', 'go_to_phrases', 'words_avoid',
            'differentiator', 'what_i_believe', 'what_i_refuse',
            'cta_style', 'known_for',
            'business_focus', 'lead_source', 'decision_style',
            'client_fear', 'repeat_explanation', 'why_i_care',
            'decision_trust', 'decision_accuracy', 'decision_education',
            'decision_relationships', 'decision_simplicity', 'decision_consistency',
            'custom_decision',
            'income_goal', 'avg_commission', 'deals_needed', 'appt_ratio',
            'appointments_needed', 'weekly_conversations',
            'ceo_hour_day', 'ceo_hour_time', 'visibility_commitment',
            'thirty_day_focus', 'ignore_distractions'
        ];

        function initPlanBuilder() {
            // Restore saved values
            builderFields.forEach(field => {
                const el = document.getElementById(field);
                if (el && state.plan[field] !== undefined) {
                    if (el.type === 'checkbox') {
                        el.checked = state.plan[field];
                    } else {
                        el.value = state.plan[field];
                    }
                }
            });
            
            // Pre-fill from onboarding
            if (state.profile.name && !state.plan.name) {
                document.getElementById('name').value = state.profile.name;
            }
            if (state.profile.incomeGoal && !state.plan.income_goal) {
                document.getElementById('income_goal').value = state.profile.incomeGoal;
            }
            
            // Setup auto-save on all inputs
            builderFields.forEach(field => {
                const el = document.getElementById(field);
                if (el) {
                    el.addEventListener('change', () => savePlanField(field));
                    el.addEventListener('input', debounce(() => savePlanField(field), 500));
                }
            });
            
            // Setup math auto-calculation
            ['income_goal', 'avg_commission', 'appt_ratio'].forEach(field => {
                document.getElementById(field)?.addEventListener('input', calculateMath);
            });
            
            updateBuilderStep();
        }

        function savePlanField(field) {
            const el = document.getElementById(field);
            if (el) {
                if (el.type === 'checkbox') {
                    state.plan[field] = el.checked;
                } else {
                    state.plan[field] = el.value;
                }
                saveState();
            }
        }

        function calculateMath() {
            const income = parseFloat(document.getElementById('income_goal').value.replace(/[^0-9.]/g, '')) || 0;
            const commission = parseFloat(document.getElementById('avg_commission').value.replace(/[^0-9.]/g, '')) || 0;
            const apptRatio = parseFloat(document.getElementById('appt_ratio').value) || 4;
            
            if (income && commission) {
                const deals = Math.ceil(income / commission);
                document.getElementById('deals_needed').value = deals;
                state.plan.deals_needed = deals;
                
                const appointments = deals * apptRatio;
                document.getElementById('appointments_needed').value = appointments;
                state.plan.appointments_needed = appointments;
                
                const weekly = Math.ceil(appointments / 52);
                document.getElementById('weekly_conversations').value = weekly;
                state.plan.weekly_conversations = weekly;
                
                saveState();
            }
        }

        function updateBuilderStep() {
            document.querySelectorAll('.builder-step').forEach(step => {
                step.classList.remove('active');
                if (parseInt(step.dataset.step) === builderStep) {
                    step.classList.add('active');
                }
            });
            
            document.getElementById('currentStep').textContent = builderStep;
            document.getElementById('progressPercent').textContent = Math.round((builderStep / totalBuilderSteps) * 100) + '%';
            document.getElementById('progressFill').style.width = ((builderStep / totalBuilderSteps) * 100) + '%';
            
            // Show/hide nav buttons
            document.getElementById('prevBtn').style.visibility = builderStep > 1 ? 'visible' : 'hidden';
            document.getElementById('nextBtn').textContent = builderStep === totalBuilderSteps - 1 ? 'Complete ‚Üí' : 'Continue ‚Üí';
            document.getElementById('builderNav').style.display = builderStep === totalBuilderSteps ? 'none' : 'flex';
            
            // Generate brand DNA on success screen
            if (builderStep === totalBuilderSteps) {
                generateBrandDNA();
                document.getElementById('finalCalmNumber').textContent = state.plan.weekly_conversations || '‚Äî';
            }
        }

        function nextBuilderStep() {
            if (builderStep < totalBuilderSteps) {
                builderStep++;
                updateBuilderStep();
                window.scrollTo(0, 0);
            }
        }

        function prevBuilderStep() {
            if (builderStep > 1) {
                builderStep--;
                updateBuilderStep();
                window.scrollTo(0, 0);
            }
        }

        function generateBrandDNA() {
            const p = state.plan;
            const dna = `=== BRAND DNA + CLONE CONTEXT ===

IDENTITY
Name: ${p.name || '[Not set]'}
Market: ${p.market_area || '[Not set]'}

DISCIPLINE TRIAD
Who I Serve: ${p.who_i_serve || '[Not set]'}
What Decision: ${p.what_decision || '[Not set]'}
Who NOT For: ${p.who_not_for || '[Not set]'}

BRAND VOICE
Voice Feels Like: ${p.voice_feels_like || '[Not set]'}
Clients Feel: ${p.clients_feel || '[Not set]'}
Go-To Phrases: ${p.go_to_phrases || '[Not set]'}
Words I Avoid: ${p.words_avoid || '[Not set]'}

POSITIONING
Differentiator: ${p.differentiator || '[Not set]'}
What I Believe: ${p.what_i_believe || '[Not set]'}
What I Refuse: ${p.what_i_refuse || '[Not set]'}
CTA Style: ${p.cta_style || '[Not set]'}
Known For: ${p.known_for || '[Not set]'}

CLONE CONTEXT
Business Focus: ${p.business_focus || '[Not set]'}
Lead Source: ${p.lead_source || '[Not set]'}
Decision Style: ${p.decision_style || '[Not set]'}
Client Fear: ${p.client_fear || '[Not set]'}
Repeat Explanation: ${p.repeat_explanation || '[Not set]'}
Why I Care: ${p.why_i_care || '[Not set]'}

DECISION ENGINE
${p.decision_trust ? '‚úì' : '‚óã'} Long-term trust over short-term commission
${p.decision_accuracy ? '‚úì' : '‚óã'} Accuracy over speed
${p.decision_education ? '‚úì' : '‚óã'} Education over urgency
${p.decision_relationships ? '‚úì' : '‚óã'} Relationships over volume
${p.decision_simplicity ? '‚úì' : '‚óã'} Simplicity over complexity
${p.decision_consistency ? '‚úì' : '‚óã'} Consistency over novelty
${p.custom_decision ? '‚úì ' + p.custom_decision : ''}

THE MATH
Income Goal: ${p.income_goal || '[Not set]'}
Avg Commission: ${p.avg_commission || '[Not set]'}
Deals Needed: ${p.deals_needed || '[Not set]'}
Appointments Needed: ${p.appointments_needed || '[Not set]'}
CALM NUMBER: ${p.weekly_conversations || '[Not set]'} conversations/week

WEEKLY STANDARDS
CEO Hour: ${p.ceo_hour_day || '[Not set]'} at ${p.ceo_hour_time || '[Not set]'}
Visibility: ${p.visibility_commitment || '[Not set]'}
30-Day Focus: ${p.thirty_day_focus || '[Not set]'}
Ignoring: ${p.ignore_distractions || '[Not set]'}

=== AI PROMPT FORMAT ===

You are a clone of ${p.name || '[Name]'}, a real estate agent in ${p.market_area || '[Market]'}. 

DISCIPLINE: I help ${p.who_i_serve || '[Who]'} decide ${p.what_decision || '[What]'}. I am NOT for ${p.who_not_for || '[Not For]'}.

VOICE: ${p.voice_feels_like || '[Voice]'}. When clients work with me, they feel ${p.clients_feel || '[Feel]'}.

I SAY: ${p.go_to_phrases || '[Phrases]'}
I NEVER SAY: ${p.words_avoid || '[Avoid]'}

BELIEFS: ${p.what_i_believe || '[Beliefs]'}
REFUSALS: ${p.what_i_refuse || '[Refusals]'}

When writing content, match this voice exactly. Be ${p.voice_feels_like || 'authentic'}. Use the phrases I use. Never use the phrases I avoid.`;

            document.getElementById('brandDnaOutput').textContent = dna;
        }

        function copyBrandDNA() {
            const dna = document.getElementById('brandDnaOutput').textContent;
            navigator.clipboard.writeText(dna).then(() => {
                alert('Brand DNA copied to clipboard!');
            });
        }

        function downloadPlan() {
            const data = {
                profile: state.profile,
                plan: state.plan,
                exportDate: new Date().toISOString(),
                version: 'FANATICAL 2026 OS v1.0'
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `fanatical-2026-plan-${state.plan.name || 'export'}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // ==================== PULSE CHECK ====================
        const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                       'July', 'August', 'September', 'October', 'November', 'December'];
        let currentPulseMonth = months[new Date().getMonth()];

        function initPulseCheck() {
            renderMonthTabs();
            renderMonthContent();
        }

        function renderMonthTabs() {
            const container = document.getElementById('monthTabs');
            container.innerHTML = months.map((month, i) => {
                const isQuarter = [2, 5, 8, 11].includes(i);
                const isComplete = state.pulse[month]?.closings;
                return `
                    <button class="month-tab ${month === currentPulseMonth ? 'active' : ''} ${isComplete ? 'completed' : ''}" 
                            onclick="selectMonth('${month}')">
                        ${month.substring(0, 3)}
                        ${isQuarter ? '<span class="quarter-badge">Q' + Math.floor((i + 3) / 3) + '</span>' : ''}
                    </button>
                `;
            }).join('');
            
            // Update year progress
            const complete = months.filter(m => state.pulse[m]?.closings).length;
            document.getElementById('yearProgress').style.width = ((complete / 12) * 100) + '%';
            document.getElementById('yearProgressText').textContent = `${complete}/12 months completed`;
        }

        function selectMonth(month) {
            currentPulseMonth = month;
            document.querySelectorAll('.month-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.textContent.includes(month.substring(0, 3))) {
                    tab.classList.add('active');
                }
            });
            renderMonthContent();
        }

        function renderMonthContent() {
            const month = currentPulseMonth;
            const data = state.pulse[month] || {};
            const monthIndex = months.indexOf(month);
            const isQuarter = [2, 5, 8, 11].includes(monthIndex);
            
            document.getElementById('monthContent').innerHTML = `
                <div class="card">
                    <h3>${month} ${state.year}</h3>
                    
                    <div class="pulse-section">
                        <div class="pulse-section-title">üìä The Numbers</div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Closings</label>
                                <input type="number" id="pulse_closings" value="${data.closings || ''}" 
                                       onchange="savePulseField('closings')">
                            </div>
                            <div class="form-group">
                                <label>Total Conversations</label>
                                <input type="number" id="pulse_conversations" value="${data.conversations || ''}"
                                       onchange="savePulseField('conversations')">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Appointments Set</label>
                                <input type="number" id="pulse_appointments" value="${data.appointments || ''}"
                                       onchange="savePulseField('appointments')">
                            </div>
                            <div class="form-group">
                                <label>Content Published</label>
                                <input type="number" id="pulse_content" value="${data.content || ''}"
                                       onchange="savePulseField('content')">
                            </div>
                        </div>
                    </div>
                    
                    <div class="pulse-section">
                        <div class="pulse-section-title">‚úì Execution Check</div>
                        <div class="form-group">
                            <label>Hit conversation target?</label>
                            <div class="radio-group">
                                ${['Yes', 'Most', 'No'].map(v => `
                                    <label class="radio-option ${data.convTarget === v ? 'selected' : ''}" 
                                           onclick="selectPulseRadio('convTarget', '${v}', this)">
                                        <input type="radio" name="convTarget" value="${v}" ${data.convTarget === v ? 'checked' : ''}>
                                        ${v}
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Consistent follow-up?</label>
                            <div class="radio-group">
                                ${['Yes', 'Most', 'No'].map(v => `
                                    <label class="radio-option ${data.followups === v ? 'selected' : ''}"
                                           onclick="selectPulseRadio('followups', '${v}', this)">
                                        <input type="radio" name="followups" value="${v}" ${data.followups === v ? 'checked' : ''}>
                                        ${v}
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                        <div class="form-group">
                            <label>CEO Hour every week?</label>
                            <div class="radio-group">
                                ${['Yes', 'Most', 'No'].map(v => `
                                    <label class="radio-option ${data.ceoHour === v ? 'selected' : ''}"
                                           onclick="selectPulseRadio('ceoHour', '${v}', this)">
                                        <input type="radio" name="ceoHour" value="${v}" ${data.ceoHour === v ? 'checked' : ''}>
                                        ${v}
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                    
                    <div class="pulse-section">
                        <div class="pulse-section-title">üéØ Focus Check</div>
                        <div class="form-group">
                            <label>How's your focus?</label>
                            <div class="radio-group">
                                ${['Focused', 'Drifting', 'Need to Refocus'].map(v => `
                                    <label class="radio-option ${data.focus === v ? 'selected' : ''}"
                                           onclick="selectPulseRadio('focus', '${v}', this)">
                                        <input type="radio" name="focus" value="${v}" ${data.focus === v ? 'checked' : ''}>
                                        ${v}
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                        ${data.focus === 'Drifting' || data.focus === 'Need to Refocus' ? `
                            <div class="form-group">
                                <label>What's causing the drift?</label>
                                <textarea id="pulse_driftReason" onchange="savePulseField('driftReason')">${data.driftReason || ''}</textarea>
                            </div>
                        ` : ''}
                    </div>
                    
                    <div class="pulse-section">
                        <div class="pulse-section-title">‚ö° Energy Check</div>
                        <div class="form-group">
                            <label>Energy level this month?</label>
                            <div class="radio-group">
                                ${['High', 'Medium', 'Low'].map(v => `
                                    <label class="radio-option ${data.energy === v ? 'selected' : ''}"
                                           onclick="selectPulseRadio('energy', '${v}', this)">
                                        <input type="radio" name="energy" value="${v}" ${data.energy === v ? 'checked' : ''}>
                                        ${v}
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                        ${data.energy === 'Low' ? `
                            <div class="form-group">
                                <label>What's draining you?</label>
                                <textarea id="pulse_energyReason" onchange="savePulseField('energyReason')">${data.energyReason || ''}</textarea>
                            </div>
                            <div class="form-group">
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" id="pulse_burnout" ${data.burnout ? 'checked' : ''} 
                                           onchange="savePulseField('burnout')" style="width: auto;">
                                    This feels like real burnout (not just a tough week)
                                </label>
                            </div>
                        ` : ''}
                    </div>
                    
                    <div class="pulse-section">
                        <div class="pulse-section-title">üí≠ Reflection</div>
                        <div class="form-group">
                            <label>What worked this month?</label>
                            <textarea id="pulse_worked" onchange="savePulseField('worked')">${data.worked || ''}</textarea>
                        </div>
                        <div class="form-group">
                            <label>What didn't work?</label>
                            <textarea id="pulse_didntWork" onchange="savePulseField('didntWork')">${data.didntWork || ''}</textarea>
                        </div>
                        <div class="form-group">
                            <label>ONE adjustment for next month</label>
                            <input type="text" id="pulse_adjustment" value="${data.adjustment || ''}" 
                                   onchange="savePulseField('adjustment')">
                        </div>
                    </div>
                    
                    ${isQuarter ? `
                        <div class="pulse-section" style="background: var(--accent-dim); padding: 1.5rem; border-radius: 0.75rem; margin-top: 1rem;">
                            <div class="pulse-section-title" style="color: var(--accent);">üìÖ Quarter Review</div>
                            <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 1rem;">
                                End of Q${Math.floor((monthIndex + 3) / 3)} ‚Äî Bigger adjustments allowed.
                            </p>
                            <div class="form-group">
                                <label>Pipeline health check</label>
                                <textarea id="pulse_pipelineHealth" onchange="savePulseField('pipelineHealth')"
                                          placeholder="How does your pipeline look for next quarter?">${data.pipelineHealth || ''}</textarea>
                            </div>
                            <div class="form-group">
                                <label>Strategy review ‚Äî Any major pivots needed?</label>
                                <textarea id="pulse_strategyReview" onchange="savePulseField('strategyReview')"
                                          placeholder="Only pivot if you've executed consistently for 90 days AND data supports it.">${data.strategyReview || ''}</textarea>
                            </div>
                        </div>
                    ` : ''}
                </div>
            `;
        }

        function savePulseField(field) {
            if (!state.pulse[currentPulseMonth]) {
                state.pulse[currentPulseMonth] = {};
            }
            
            const el = document.getElementById('pulse_' + field);
            if (el) {
                if (el.type === 'checkbox') {
                    state.pulse[currentPulseMonth][field] = el.checked;
                } else {
                    state.pulse[currentPulseMonth][field] = el.value;
                }
            }
            
            saveState();
            renderMonthTabs();
        }

        function selectPulseRadio(field, value, element) {
            if (!state.pulse[currentPulseMonth]) {
                state.pulse[currentPulseMonth] = {};
            }
            state.pulse[currentPulseMonth][field] = value;
            
            // Update UI
            element.parentNode.querySelectorAll('.radio-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            
            saveState();
            
            // Re-render if focus or energy changed (to show conditional fields)
            if (field === 'focus' || field === 'energy') {
                renderMonthContent();
            }
        }

        function exportPulseCheck() {
            const data = {
                year: state.year,
                pulse: state.pulse,
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `fanatical-${state.year}-pulse-check.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // ==================== STANDARDS ====================
        const standards = [
            {
                id: 1,
                title: 'Google Business Profile',
                truth: 'If you are not visible on Google, you are invisible to modern clients.',
                items: [
                    'Claimed and verified',
                    'Professional description aligned with discipline',
                    'Weekly posting habit',
                    'Consistent photo uploads',
                    'Review request process in place',
                    'Every review responded to thoughtfully',
                    'Business hours accurate',
                    'Contact information current'
                ]
            },
            {
                id: 2,
                title: 'One Owned Web Asset',
                truth: "If you don't own your platform, you're borrowing credibility.",
                items: [
                    'Full website with discipline focus OR single landing page',
                    'Clearly states who you help',
                    'Clearly states what decision you help them make',
                    'How to contact you',
                    'Why you are different',
                    'Proof you can do what you claim',
                    'Mobile-friendly and fast loading'
                ]
            },
            {
                id: 3,
                title: 'CRM Literacy',
                truth: 'Missed follow-up is missed income.',
                items: [
                    'Log every contact',
                    'Tag by discipline or intent',
                    'Track conversations and touchpoints',
                    'Set reminders and follow them',
                    'Follow up consistently',
                    'Segment database for targeted outreach',
                    'Track lead source for every contact'
                ]
            },
            {
                id: 4,
                title: 'One Primary Visibility Channel',
                truth: 'Consistency builds trust. Chaos builds noise.',
                items: [
                    'ONE primary channel chosen',
                    'Up to TWO supporting channels',
                    'Consistent presence (defined cadence)',
                    'Discipline-aligned messaging',
                    'Long-term execution (min 90 days)'
                ]
            },
            {
                id: 5,
                title: 'Defined Discipline',
                truth: 'Specialization is not limitation. It is leverage.',
                items: [
                    'ONE primary discipline',
                    'ONE optional secondary discipline',
                    'Website speaks to this discipline',
                    'Content addresses this audience',
                    'Conversations target this client type',
                    'Referral requests specify this focus'
                ]
            },
            {
                id: 6,
                title: 'Decision-Stage Clarity',
                truth: 'Clarity converts faster than persuasion.',
                items: [
                    'Can clearly state "I help _____ decide _____"',
                    'Guides your content topics',
                    'Guides your conversations',
                    'Guides your website messaging',
                    'Guides your AI prompts and tools'
                ]
            },
            {
                id: 7,
                title: 'Brand DNA Documented',
                truth: 'Inconsistency erodes trust.',
                items: [
                    'Voice and tone (3-5 descriptors)',
                    'Values (what guides decisions)',
                    'Boundaries (what you will not do)',
                    'Brand promise (what clients expect)',
                    'Differentiator (what you do that others don\'t)',
                    'What you\'re NOT known for'
                ]
            },
            {
                id: 8,
                title: 'Weekly Execution Standards',
                truth: 'Results follow standards, not moods.',
                items: [
                    'Meaningful conversations (target defined)',
                    'Follow-up block (protected time)',
                    'One authority/visibility action',
                    'CEO Hour (same time weekly)',
                    'Specific targets or durations',
                    'Scheduled times on calendar'
                ]
            },
            {
                id: 9,
                title: 'Monthly Review Habit',
                truth: 'Awareness prevents burnout and drift.',
                items: [
                    'Review closings (actual vs target)',
                    'Review conversations',
                    'Review energy level',
                    'Review strategy execution',
                    'Focus check (still on discipline?)',
                    'Make ONE adjustment only'
                ]
            },
            {
                id: 10,
                title: 'Pipeline Visibility',
                truth: 'Silence does not mean failure. Lag is normal.',
                items: [
                    'Track active nurtures',
                    'Know pipeline length',
                    'Track expected future closings',
                    'Track lead source of pipeline',
                    'Understand lag is normal',
                    'Don\'t abandon strategy during slow months'
                ]
            },
            {
                id: 11,
                title: 'Digital Security',
                truth: 'Trust is destroyed faster than it is built.',
                items: [
                    'Two-factor authentication',
                    'Secure unique passwords (password manager)',
                    'Wire-fraud awareness and protocols',
                    'Clean file organization',
                    'Professional communication systems',
                    'Secure document sharing',
                    'Regular backup of critical data'
                ]
            },
            {
                id: 12,
                title: 'AI Literacy',
                truth: 'AI should amplify your thinking‚Äînot replace it.',
                items: [
                    'Clarify strategy and positioning',
                    'Draft content aligned with voice',
                    'Improve messaging and communication',
                    'Reflect and refine your approach',
                    'Research and analyze market data',
                    'Trained with Brand DNA',
                    'Used to amplify thinking, not replace it',
                    'Applied ethically and transparently'
                ]
            },
            {
                id: 13,
                title: 'Low-Energy Fail-Safe Rules',
                truth: 'Consistency beats intensity every time.',
                items: [
                    'Restart action defined',
                    'Maximum allowed drift defined',
                    'Recovery plan documented',
                    'Shame removal process defined',
                    'Return within 72 hours',
                    'Start with ONE action',
                    'Acknowledge dips as normal'
                ]
            },
            {
                id: 14,
                title: 'Strategy Pivot Rules',
                truth: 'Boredom is not a business signal.',
                items: [
                    'Executed consistently for 90 days',
                    'Data supports the change',
                    'Discipline remains clear',
                    'Won\'t pivot from boredom',
                    'Won\'t pivot from seeing others\' success',
                    'Won\'t pivot from frustration',
                    'Won\'t pivot from fear'
                ]
            }
        ];

        function initStandards() {
            renderStandards();
        }

        function renderStandards() {
            const container = document.getElementById('standardsList');
            
            container.innerHTML = standards.map(standard => {
                const checkedCount = standard.items.filter((_, i) => 
                    state.standards[`s${standard.id}_${i}`]
                ).length;
                const isComplete = checkedCount === standard.items.length;
                
                return `
                    <div class="standard-card ${isComplete ? 'complete' : ''}" id="standard-${standard.id}">
                        <div class="standard-header" onclick="toggleStandard(${standard.id})">
                            <div class="standard-title">
                                <div class="standard-number">${isComplete ? '‚úì' : standard.id}</div>
                                <div>
                                    <h4>${standard.title}</h4>
                                    <span style="font-size: 0.75rem; color: var(--text-muted);">${checkedCount}/${standard.items.length} complete</span>
                                </div>
                            </div>
                            <span class="pill ${isComplete ? 'pill-success' : 'pill-danger'}">
                                ${isComplete ? 'Complete' : 'Gap'}
                            </span>
                        </div>
                        <div class="standard-content">
                            <div class="standard-truth">"${standard.truth}"</div>
                            <div class="checklist">
                                ${standard.items.map((item, i) => {
                                    const checked = state.standards[`s${standard.id}_${i}`];
                                    return `
                                        <div class="checklist-item ${checked ? 'checked' : ''}" 
                                             onclick="toggleStandardItem(${standard.id}, ${i}, this)">
                                            <input type="checkbox" ${checked ? 'checked' : ''}>
                                            <label>${item}</label>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
            
            updateStandardsProgress();
        }

        function toggleStandard(id) {
            const card = document.getElementById('standard-' + id);
            card.classList.toggle('open');
        }

        function toggleStandardItem(standardId, itemIndex, element) {
            const key = `s${standardId}_${itemIndex}`;
            state.standards[key] = !state.standards[key];
            
            const checkbox = element.querySelector('input');
            checkbox.checked = state.standards[key];
            element.classList.toggle('checked', state.standards[key]);
            
            saveState();
            renderStandards();
        }

        function countCompleteStandards() {
            return standards.filter(standard => {
                return standard.items.every((_, i) => state.standards[`s${standard.id}_${i}`]);
            }).length;
        }

        function updateStandardsProgress() {
            const complete = countCompleteStandards();
            const gaps = 14 - complete;
            
            document.getElementById('standardsComplete').textContent = complete;
            document.getElementById('standardsGaps').textContent = gaps === 0 ? 
                'All standards complete!' : `${gaps} gap${gaps !== 1 ? 's' : ''} remaining`;
        }

        function exportStandards() {
            const data = {
                standards: state.standards,
                summary: {
                    complete: countCompleteStandards(),
                    total: 14
                },
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'fanatical-standards-audit.json';
            a.click();
            URL.revokeObjectURL(url);
        }

        // ==================== PROMPTS ====================
        const prompts = {
            content: [
                {
                    title: 'Weekly Market Update Post',
                    prompt: `Write a weekly market update post for my real estate audience.

MY BRAND DNA:
- I help: [WHO_I_SERVE]
- Voice: [VOICE_FEELS_LIKE]
- I never say: [WORDS_AVOID]

The update should:
1. Share one relevant market insight
2. Connect it to my audience's situation
3. End with my CTA style: [CTA_STYLE]

Keep it under 150 words. Match my voice exactly.`
                },
                {
                    title: '"Just Listed" Announcement',
                    prompt: `Write a "Just Listed" social media post for a new listing.

MY BRAND DNA:
- I help: [WHO_I_SERVE]
- Voice: [VOICE_FEELS_LIKE]
- Known for: [KNOWN_FOR]

Property details: [DESCRIBE PROPERTY]

The post should:
1. Lead with what makes this home special for MY audience
2. Include key details without being a list
3. Match my educational, non-pushy style
4. End naturally, not with urgency

No exclamation points. No "Don't miss out!""`
                },
                {
                    title: 'Educational Carousel Idea',
                    prompt: `Create an educational carousel post idea for Instagram.

MY BRAND DNA:
- I help: [WHO_I_SERVE] decide [WHAT_DECISION]
- Their biggest fear: [CLIENT_FEAR]
- I repeatedly explain: [REPEAT_EXPLANATION]

Topic: [TOPIC OR LEAVE BLANK FOR SUGGESTIONS]

Give me:
1. Hook slide (attention-grabbing question)
2. 4-5 content slides (one key point each)
3. Final CTA slide

Keep each slide to 1-2 sentences max. Match my calm, educational voice.`
                },
                {
                    title: 'Client Story Framework',
                    prompt: `Help me write a client success story post.

MY BRAND DNA:
- I help: [WHO_I_SERVE]
- What I believe: [WHAT_I_BELIEVE]
- Why I care: [WHY_I_CARE]

Client situation: [BRIEF DESCRIPTION]

Write a story that:
1. Opens with the client's challenge (relatable to my audience)
2. Shows how we worked through it together
3. Ends with the outcome AND the feeling
4. Naturally reflects my values

Keep it authentic. No over-the-top celebration. Under 200 words.`
                },
                {
                    title: 'Engagement Question Post',
                    prompt: `Write an engagement post that gets my audience talking.

MY BRAND DNA:
- I help: [WHO_I_SERVE]
- Their biggest fear: [CLIENT_FEAR]
- My voice feels: [VOICE_FEELS_LIKE]

Create a post that:
1. Asks a genuine question my audience is thinking about
2. Makes them feel safe to answer (no judgment)
3. Relates to their [STAGE OF JOURNEY]
4. Matches my approachable voice

Not: "What's your dream home?" (too generic)
More: Something that shows I understand their real situation.`
                }
            ],
            email: [
                {
                    title: 'Database Reactivation',
                    prompt: `Write a warm reactivation email to past clients/contacts I haven't spoken to in 6+ months.

MY BRAND DNA:
- I help: [WHO_I_SERVE]
- Voice: [VOICE_FEELS_LIKE]
- CTA style: [CTA_STYLE]

The email should:
1. Feel personal, not mass-blast
2. Reference that time has passed naturally
3. Offer something useful (not "thinking about selling?")
4. Invite conversation without pressure

Subject line options too. Keep body under 100 words.`
                },
                {
                    title: 'New Lead Follow-Up',
                    prompt: `Write a follow-up email for a new lead who [DESCRIBE SOURCE/SITUATION].

MY BRAND DNA:
- I help: [WHO_I_SERVE] decide [WHAT_DECISION]
- Voice: [VOICE_FEELS_LIKE]
- Their fear: [CLIENT_FEAR]

The email should:
1. Acknowledge how they found me
2. Quickly establish I understand their situation
3. Offer one helpful next step (not pushy)
4. Match my calm, educational tone

Keep it under 100 words. No "I'd love to help you!" fluff.`
                },
                {
                    title: 'Past Client Check-In',
                    prompt: `Write a genuine check-in email to a past client [X MONTHS/YEARS] after closing.

MY BRAND DNA:
- Voice: [VOICE_FEELS_LIKE]
- Why I care: [WHY_I_CARE]
- Known for: [KNOWN_FOR]

The email should:
1. Feel like a real person checking in
2. Reference their specific purchase naturally
3. Offer something useful (not ask for referrals directly)
4. Leave door open for questions

No: "Hope you're loving your home!"
More: Something that shows I remember them.`
                }
            ],
            objections: [
                {
                    title: '"I\'m waiting for rates to drop"',
                    prompt: `Help me respond to: "I'm going to wait for interest rates to drop."

MY BRAND DNA:
- I help: [WHO_I_SERVE]
- Voice: [VOICE_FEELS_LIKE]
- What I believe: [WHAT_I_BELIEVE]
- I never say: [WORDS_AVOID]

Write a response that:
1. Validates their thinking (not dismissive)
2. Shares perspective with data, not pressure
3. Helps them think through the decision
4. Respects that waiting might be right for them

No fear tactics. No "rates might go higher!" Match my educational style.`
                },
                {
                    title: '"I want to sell before I buy"',
                    prompt: `Help me respond to: "I want to sell my house before I buy another one."

MY BRAND DNA:
- I help: [WHO_I_SERVE]
- Voice: [VOICE_FEELS_LIKE]
- Decision style: [DECISION_STYLE]

Write a response that:
1. Acknowledges why this feels safer
2. Explains the options without overwhelming
3. Helps them understand the tradeoffs
4. Offers to walk through scenarios

No pressure to do it "my way." Educational and patient.`
                }
            ],
            clone: [
                {
                    title: 'Improve My Brand DNA',
                    prompt: `Review and improve my Brand DNA document.

Here is my current Brand DNA:
[PASTE YOUR BRAND DNA]

Please:
1. Identify any inconsistencies or gaps
2. Suggest stronger language where I'm being vague
3. Flag anything that sounds generic (could be any agent)
4. Recommend additions that would help AI clone me better

Be direct. I want this to be specific enough that AI can sound like ME, not like "a helpful real estate agent."`
                }
            ]
        };

        function initPrompts() {
            const container = document.getElementById('promptsContent');
            
            const categories = [
                { key: 'content', title: 'üìù Content Prompts', count: 5 },
                { key: 'email', title: '‚úâÔ∏è Email Prompts', count: 3 },
                { key: 'objections', title: 'üí¨ Objection Prompts', count: 2 },
                { key: 'clone', title: 'ü§ñ Clone Refinement', count: 1 }
            ];
            
            container.innerHTML = categories.map(cat => `
                <div class="prompt-category">
                    <div class="prompt-category-title">${cat.title}</div>
                    ${prompts[cat.key].map((prompt, i) => `
                        <div class="prompt-card" id="prompt-${cat.key}-${i}">
                            <div class="prompt-header" onclick="togglePrompt('${cat.key}', ${i})">
                                <span>${prompt.title}</span>
                                <span style="color: var(--text-muted);">‚ñº</span>
                            </div>
                            <div class="prompt-content">
                                <div class="prompt-text">${personalizePrompt(prompt.prompt)}</div>
                                <button class="btn btn-primary" onclick="copyPrompt('${cat.key}', ${i})">
                                    üìã Copy Prompt
                                </button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `).join('');
        }

        function togglePrompt(category, index) {
            const card = document.getElementById(`prompt-${category}-${index}`);
            card.classList.toggle('open');
        }

        function personalizePrompt(template) {
            const p = state.plan;
            return template
                .replace(/\[WHO_I_SERVE\]/g, p.who_i_serve || '[Complete Plan Builder]')
                .replace(/\[WHAT_DECISION\]/g, p.what_decision || '[Complete Plan Builder]')
                .replace(/\[VOICE_FEELS_LIKE\]/g, p.voice_feels_like || '[Complete Plan Builder]')
                .replace(/\[WORDS_AVOID\]/g, p.words_avoid || '[Complete Plan Builder]')
                .replace(/\[CTA_STYLE\]/g, p.cta_style || '[Complete Plan Builder]')
                .replace(/\[KNOWN_FOR\]/g, p.known_for || '[Complete Plan Builder]')
                .replace(/\[CLIENT_FEAR\]/g, p.client_fear || '[Complete Plan Builder]')
                .replace(/\[REPEAT_EXPLANATION\]/g, p.repeat_explanation || '[Complete Plan Builder]')
                .replace(/\[WHAT_I_BELIEVE\]/g, p.what_i_believe || '[Complete Plan Builder]')
                .replace(/\[WHY_I_CARE\]/g, p.why_i_care || '[Complete Plan Builder]')
                .replace(/\[DECISION_STYLE\]/g, p.decision_style || '[Complete Plan Builder]');
        }

        function copyPrompt(category, index) {
            const prompt = prompts[category][index];
            const text = personalizePrompt(prompt.prompt);
            navigator.clipboard.writeText(text).then(() => {
                alert('Prompt copied to clipboard!');
            });
        }

        // ==================== UTILITIES ====================
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
    </script>
</body>
</html>
